{
  "address": "0xae4a26eDeFB8453913b85c5a5f3BBeFdAb4474ab",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "contract ICornDEX",
          "name": "_dex",
          "type": "address"
        },
        {
          "internalType": "contract IERC20",
          "name": "_corn",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "Lending__InsufficientBorrowed",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "Lending__InsufficientCollateral",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "Lending__InsufficientLiquidatorCorn",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "Lending__InvalidAmount",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "Lending__NotLiquidatable",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "Lending__RepayingFailed",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "Lending__TransferFailed",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "Lending__UnsafePositionRatio",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amountCorn",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "priceCornPerEth",
          "type": "uint256"
        }
      ],
      "name": "AssetBorrowed",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amountCorn",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "priceCornPerEth",
          "type": "uint256"
        }
      ],
      "name": "AssetRepaid",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amountEth",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "priceCornPerEth",
          "type": "uint256"
        }
      ],
      "name": "CollateralAdded",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amountEth",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "priceCornPerEth",
          "type": "uint256"
        }
      ],
      "name": "CollateralWithdrawn",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "borrower",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "liquidator",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "repaidCorn",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "paidEth",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "priceCornPerEth",
          "type": "uint256"
        }
      ],
      "name": "Liquidation",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "COLLATERAL_RATIO",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "LIQUIDATOR_REWARD",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "addCollateral",
      "outputs": [],
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "borrowAmount",
          "type": "uint256"
        }
      ],
      "name": "borrowCorn",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        }
      ],
      "name": "calculateCollateralValue",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "i_corn",
      "outputs": [
        {
          "internalType": "contract IERC20",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "i_cornDEX",
      "outputs": [
        {
          "internalType": "contract ICornDEX",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        }
      ],
      "name": "isLiquidatable",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "borrower",
          "type": "address"
        }
      ],
      "name": "liquidate",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "repayAmount",
          "type": "uint256"
        }
      ],
      "name": "repayCorn",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "s_userBorrowed",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "s_userCollateral",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "withdrawCollateral",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "stateMutability": "payable",
      "type": "receive"
    }
  ],
  "transactionHash": "0xfbfceba0e6840750f8501245edce9e17f1301358948c742103821d700d309819",
  "receipt": {
    "to": null,
    "from": "0x9F7E09006102f52E5daaA5A65EA62288011767d4",
    "contractAddress": "0xae4a26eDeFB8453913b85c5a5f3BBeFdAb4474ab",
    "transactionIndex": 76,
    "gasUsed": "957806",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0x02190915ea33fa627535f2a8c2587c78a2cb4af5e65e7893fdf3bbe7a79344c1",
    "transactionHash": "0xfbfceba0e6840750f8501245edce9e17f1301358948c742103821d700d309819",
    "logs": [],
    "blockNumber": 9326658,
    "cumulativeGasUsed": "12199028",
    "status": 1,
    "byzantium": true
  },
  "args": [
    "0xB66Ee28E6413C333d72a2e73E4F6EBBdb0cf535A",
    "0x975a527837C91A25922339a4a0819d76772215Fa"
  ],
  "numDeployments": 1,
  "solcInputHash": "51118e958e072ed870ce6bbe3bf85ea0",
  "metadata": "{\"compiler\":{\"version\":\"0.8.20+commit.a1b79de6\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"contract ICornDEX\",\"name\":\"_dex\",\"type\":\"address\"},{\"internalType\":\"contract IERC20\",\"name\":\"_corn\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"Lending__InsufficientBorrowed\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"Lending__InsufficientCollateral\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"Lending__InsufficientLiquidatorCorn\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"Lending__InvalidAmount\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"Lending__NotLiquidatable\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"Lending__RepayingFailed\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"Lending__TransferFailed\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"Lending__UnsafePositionRatio\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amountCorn\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"priceCornPerEth\",\"type\":\"uint256\"}],\"name\":\"AssetBorrowed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amountCorn\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"priceCornPerEth\",\"type\":\"uint256\"}],\"name\":\"AssetRepaid\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amountEth\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"priceCornPerEth\",\"type\":\"uint256\"}],\"name\":\"CollateralAdded\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amountEth\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"priceCornPerEth\",\"type\":\"uint256\"}],\"name\":\"CollateralWithdrawn\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"borrower\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"liquidator\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"repaidCorn\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"paidEth\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"priceCornPerEth\",\"type\":\"uint256\"}],\"name\":\"Liquidation\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"COLLATERAL_RATIO\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"LIQUIDATOR_REWARD\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"addCollateral\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"borrowAmount\",\"type\":\"uint256\"}],\"name\":\"borrowCorn\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"}],\"name\":\"calculateCollateralValue\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"i_corn\",\"outputs\":[{\"internalType\":\"contract IERC20\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"i_cornDEX\",\"outputs\":[{\"internalType\":\"contract ICornDEX\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"}],\"name\":\"isLiquidatable\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"borrower\",\"type\":\"address\"}],\"name\":\"liquidate\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"repayAmount\",\"type\":\"uint256\"}],\"name\":\"repayCorn\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"s_userBorrowed\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"s_userCollateral\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"withdrawCollateral\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"stateMutability\":\"payable\",\"type\":\"receive\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"COLLATERAL_RATIO()\":{\"notice\":\"minimal rasio kolateral 120% (dalam persen * 1e18).\"},\"LIQUIDATOR_REWARD()\":{\"notice\":\"insentif likuidator 10% (dalam persen * 1e18).\"},\"calculateCollateralValue(address)\":{\"notice\":\"nilai kolateral (ETH) user dalam CORN (1e18)\"}},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/Lending.sol\":\"Lending\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"contracts/Lending.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\ninterface IERC20 {\\n  function transfer(address to, uint256 amount) external returns (bool);\\n  function transferFrom(address from, address to, uint256 amount) external returns (bool);\\n  function balanceOf(address account) external view returns (uint256);\\n  function allowance(address owner, address spender) external view returns (uint256);\\n}\\n\\ninterface ICornDEX {\\n  /// @dev Harga 1 ETH dalam CORN (skala 1e18).\\n  function currentPrice() external view returns (uint256);\\n}\\n\\ncontract Lending {\\n  /* ---------- Constants ---------- */\\n  uint256 private constant PRECISION = 1e18;\\n  uint256 private constant HUNDRED_PERCENT = 100 * PRECISION;\\n\\n  /// @notice minimal rasio kolateral 120% (dalam persen * 1e18).\\n  uint256 public constant COLLATERAL_RATIO = 120 * PRECISION;\\n  /// @notice insentif likuidator 10% (dalam persen * 1e18).\\n  uint256 public constant LIQUIDATOR_REWARD = 10 * PRECISION;\\n\\n  /* ---------- Immutables ---------- */\\n  IERC20 public immutable i_corn;\\n  ICornDEX public immutable i_cornDEX;\\n\\n  /* ---------- Storage ---------- */\\n  mapping(address => uint256) public s_userCollateral; // ETH (wei)\\n  mapping(address => uint256) public s_userBorrowed;   // CORN (1e18)\\n\\n  /* ---------- Events ---------- */\\n  event CollateralAdded(address indexed user, uint256 amountEth, uint256 priceCornPerEth);\\n  event CollateralWithdrawn(address indexed user, uint256 amountEth, uint256 priceCornPerEth);\\n  event AssetBorrowed(address indexed user, uint256 amountCorn, uint256 priceCornPerEth);\\n  event AssetRepaid(address indexed user, uint256 amountCorn, uint256 priceCornPerEth);\\n  event Liquidation(address indexed borrower, address indexed liquidator, uint256 repaidCorn, uint256 paidEth, uint256 priceCornPerEth);\\n\\n  /* ---------- Errors (samakan dengan test) ---------- */\\n  error Lending__InvalidAmount();\\n  error Lending__InsufficientCollateral();\\n  error Lending__InsufficientBorrowed();\\n  error Lending__UnsafePositionRatio();\\n  error Lending__NotLiquidatable();\\n  error Lending__InsufficientLiquidatorCorn();\\n  error Lending__TransferFailed();\\n  error Lending__RepayingFailed();\\n\\n  /* ---------- Constructor (URUTANNYA: DEX dulu, lalu CORN) ---------- */\\n  constructor(ICornDEX _dex, IERC20 _corn) {\\n    i_cornDEX = _dex;\\n    i_corn = _corn;\\n  }\\n\\n  /* ---------------- Collateral ---------------- */\\n\\n  function addCollateral() external payable {\\n    if (msg.value == 0) revert Lending__InvalidAmount();\\n    s_userCollateral[msg.sender] += msg.value;\\n    emit CollateralAdded(msg.sender, msg.value, i_cornDEX.currentPrice());\\n  }\\n\\n  function withdrawCollateral(uint256 amount) external {\\n    if (amount == 0) revert Lending__InvalidAmount();\\nuint256 current = s_userCollateral[msg.sender];\\n// if (amount > current) revert Lending__InsufficientCollateral();\\nif (amount > current) revert Lending__InvalidAmount();\\n\\n\\n    unchecked {\\n      s_userCollateral[msg.sender] = current - amount;\\n    }\\n\\n    // Jika masih punya utang, pastikan tetap aman setelah penarikan\\n    if (s_userBorrowed[msg.sender] > 0) _validatePosition(msg.sender);\\n\\n    (bool ok, ) = payable(msg.sender).call{value: amount}(\\\"\\\");\\n    if (!ok) revert Lending__TransferFailed();\\n\\n    emit CollateralWithdrawn(msg.sender, amount, i_cornDEX.currentPrice());\\n  }\\n\\n  /* ---------------- Helpers ---------------- */\\n\\n  /// @notice nilai kolateral (ETH) user dalam CORN (1e18)\\n  function calculateCollateralValue(address user) public view returns (uint256) {\\n    uint256 collateralEth = s_userCollateral[user];\\n    uint256 priceCornPerEth = i_cornDEX.currentPrice(); // CORN per 1 ETH (1e18)\\n    return (collateralEth * priceCornPerEth) / PRECISION;\\n  }\\n\\n  /// @dev (collateralValue / borrowed) * 100% * 1e18  (contoh 133% => 133e18)\\n  function _calculatePositionRatio(address user) internal view returns (uint256) {\\n    uint256 borrowed = s_userBorrowed[user];\\n    if (borrowed == 0) {\\n      return type(uint256).max;\\n    }\\n    uint256 collateralValueCorn = calculateCollateralValue(user);\\n    return (collateralValueCorn * HUNDRED_PERCENT) / borrowed;\\n  }\\n\\n  function isLiquidatable(address user) public view returns (bool) {\\n    return _calculatePositionRatio(user) < COLLATERAL_RATIO;\\n  }\\n\\n  function _validatePosition(address user) internal view {\\n    if (isLiquidatable(user)) revert Lending__UnsafePositionRatio();\\n  }\\n\\n  /* ---------------- Borrow / Repay ---------------- */\\n\\n  function borrowCorn(uint256 borrowAmount) external {\\n    if (borrowAmount == 0) revert Lending__InvalidAmount();\\n\\n    s_userBorrowed[msg.sender] += borrowAmount;\\n    _validatePosition(msg.sender);\\n\\n    bool ok = i_corn.transfer(msg.sender, borrowAmount);\\n    if (!ok) revert Lending__TransferFailed();\\n\\n    emit AssetBorrowed(msg.sender, borrowAmount, i_cornDEX.currentPrice());\\n  }\\n\\n  function repayCorn(uint256 repayAmount) external {\\n    if (repayAmount == 0) revert Lending__InvalidAmount();\\nuint256 borrowed = s_userBorrowed[msg.sender];\\n// if (repayAmount > borrowed) revert Lending__InsufficientBorrowed();\\nif (repayAmount > borrowed) revert Lending__InvalidAmount();\\n\\n    s_userBorrowed[msg.sender] = borrowed - repayAmount;\\n\\n    bool ok = i_corn.transferFrom(msg.sender, address(this), repayAmount);\\n    if (!ok) revert Lending__RepayingFailed();\\n\\n    emit AssetRepaid(msg.sender, repayAmount, i_cornDEX.currentPrice());\\n  }\\n\\n  /* ---------------- Liquidate ---------------- */\\n\\n  function liquidate(address borrower) external {\\n    if (!isLiquidatable(borrower)) revert Lending__NotLiquidatable();\\n\\n    uint256 debtCorn = s_userBorrowed[borrower];\\n    if (debtCorn == 0) revert Lending__NotLiquidatable();\\n\\n    if (i_corn.balanceOf(msg.sender) < debtCorn || i_corn.allowance(msg.sender, address(this)) < debtCorn) {\\n      revert Lending__InsufficientLiquidatorCorn();\\n    }\\n\\n    bool pulled = i_corn.transferFrom(msg.sender, address(this), debtCorn);\\n    if (!pulled) revert Lending__TransferFailed();\\n\\n    // clear utang\\n    s_userBorrowed[borrower] = 0;\\n\\n    // konversi CORN -> ETH berdasar harga DEX\\n    uint256 priceCornPerEth = i_cornDEX.currentPrice(); // CORN per 1 ETH\\n    uint256 baseEth = (debtCorn * PRECISION) / priceCornPerEth;\\n\\n    // reward\\n    uint256 rewardEth = (baseEth * LIQUIDATOR_REWARD) / HUNDRED_PERCENT;\\n    uint256 payEth = baseEth + rewardEth;\\n\\n    uint256 col = s_userCollateral[borrower];\\n    if (payEth > col) payEth = col;\\n\\n    s_userCollateral[borrower] = col - payEth;\\n\\n    (bool sent, ) = payable(msg.sender).call{value: payEth}(\\\"\\\");\\n    if (!sent) revert Lending__TransferFailed();\\n\\n    emit Liquidation(borrower, msg.sender, debtCorn, payEth, priceCornPerEth);\\n  }\\n\\n  receive() external payable {}\\n}\\n\",\"keccak256\":\"0xb872794a138ec9a9c3a35510280ca1fb6c4da7cae6f3780dfcdc4d7af1c3be04\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x60c060405234801561001057600080fd5b5060405161116738038061116783398101604081905261002f9161005e565b6001600160a01b0391821660a05216608052610098565b6001600160a01b038116811461005b57600080fd5b50565b6000806040838503121561007157600080fd5b825161007c81610046565b602084015190925061008d81610046565b809150509250929050565b60805160a05161105d61010a600039600081816101cb01528181610316015281816106470152818161095501528181610a7d01528181610c480152610e3a0152600081816102a101528181610434015281816104cb0152818161058301528181610b850152610d7f015261105d6000f3fe6080604052600436106100c65760003560e01c80638ba62f231161007f578063d5de45a611610059578063d5de45a61461023a578063d678598a1461025a578063d9e69a051461027a578063eee1ea331461028f57600080fd5b80638ba62f23146101b95780639e81699914610205578063bd00c24d1461020d57600080fd5b8063042e02cf146100d25780630835e145146101075780632a5f2c23146101355780632f865568146101625780636112fe2e146101845780637f3020c1146101a457600080fd5b366100cd57005b600080fd5b3480156100de57600080fd5b506100f26100ed366004610f28565b6102c3565b60405190151581526020015b60405180910390f35b34801561011357600080fd5b50610127610122366004610f28565b6102e8565b6040519081526020016100fe565b34801561014157600080fd5b50610127610150366004610f28565b60016020526000908152604090205481565b34801561016e57600080fd5b5061018261017d366004610f28565b6103bd565b005b34801561019057600080fd5b5061018261019f366004610f58565b610841565b3480156101b057600080fd5b506101276109f2565b3480156101c557600080fd5b506101ed7f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b0390911681526020016100fe565b610182610a08565b34801561021957600080fd5b50610127610228366004610f28565b60006020819052908152604090205481565b34801561024657600080fd5b50610182610255366004610f58565b610b17565b34801561026657600080fd5b50610182610275366004610f58565b610ce4565b34801561028657600080fd5b50610127610e96565b34801561029b57600080fd5b506101ed7f000000000000000000000000000000000000000000000000000000000000000081565b60006102d8670de0b6b3a76400006078610f87565b6102e183610ea9565b1092915050565b600080600080846001600160a01b03166001600160a01b0316815260200190815260200160002054905060007f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316639d1b464a6040518163ffffffff1660e01b8152600401602060405180830381865afa158015610372573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103969190610fa4565b9050670de0b6b3a76400006103ab8284610f87565b6103b59190610fbd565b949350505050565b6103c6816102c3565b6103e35760405163175ae04960e11b815260040160405180910390fd5b6001600160a01b0381166000908152600160205260408120549081900361041d5760405163175ae04960e11b815260040160405180910390fd5b6040516370a0823160e01b815233600482015281907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906370a0823190602401602060405180830381865afa158015610483573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104a79190610fa4565b10806105405750604051636eb1769f60e11b815233600482015230602482015281907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063dd62ed3e90604401602060405180830381865afa15801561051a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061053e9190610fa4565b105b1561055e576040516327f93fb360e11b815260040160405180910390fd5b6040516323b872dd60e01b8152336004820152306024820152604481018290526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906323b872dd906064016020604051808303816000875af11580156105d4573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105f89190610fdf565b9050806106185760405163a419137f60e01b815260040160405180910390fd5b600060016000856001600160a01b03166001600160a01b031681526020019081526020016000208190555060007f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316639d1b464a6040518163ffffffff1660e01b8152600401602060405180830381865afa1580156106a3573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106c79190610fa4565b90506000816106de670de0b6b3a764000086610f87565b6106e89190610fbd565b905060006106ff670de0b6b3a76400006064610f87565b610712670de0b6b3a7640000600a610f87565b61071c9084610f87565b6107269190610fbd565b905060006107348284611001565b6001600160a01b0388166000908152602081905260409020549091508082111561075c578091505b6107668282611014565b6001600160a01b038916600090815260208190526040808220929092559051339084908381818185875af1925050503d80600081146107c1576040519150601f19603f3d011682016040523d82523d6000602084013e6107c6565b606091505b50509050806107e85760405163a419137f60e01b815260040160405180910390fd5b604080518981526020810185905290810187905233906001600160a01b038b16907f5a821a618ddb1a1fd304234a69c9d7f20c129d122fcf35593d13a071926643079060600160405180910390a3505050505050505050565b806000036108625760405163269cf19b60e11b815260040160405180910390fd5b33600090815260208190526040902054808211156108935760405163269cf19b60e11b815260040160405180910390fd5b3360009081526020818152604080832085850390556001909152902054156108be576108be33610efe565b604051600090339084908381818185875af1925050503d8060008114610900576040519150601f19603f3d011682016040523d82523d6000602084013e610905565b606091505b50509050806109275760405163a419137f60e01b815260040160405180910390fd5b336001600160a01b03167fdaed309a628faec6cab72194019e2a1a34e890ca9bf9be99788992dd54692819847f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316639d1b464a6040518163ffffffff1660e01b8152600401602060405180830381865afa1580156109b1573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109d59190610fa4565b6040805192835260208301919091520160405180910390a2505050565b610a05670de0b6b3a7640000600a610f87565b81565b34600003610a295760405163269cf19b60e11b815260040160405180910390fd5b3360009081526020819052604081208054349290610a48908490611001565b92505081905550336001600160a01b03167f11f8990ac38271f23dea447d5728e9914fca7cea2edda43af6c43c415f8bc30b347f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316639d1b464a6040518163ffffffff1660e01b8152600401602060405180830381865afa158015610ad9573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610afd9190610fa4565b6040805192835260208301919091520160405180910390a2565b80600003610b385760405163269cf19b60e11b815260040160405180910390fd5b3360009081526001602052604081208054839290610b57908490611001565b90915550610b66905033610efe565b60405163a9059cbb60e01b8152336004820152602481018290526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063a9059cbb906044016020604051808303816000875af1158015610bd6573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610bfa9190610fdf565b905080610c1a5760405163a419137f60e01b815260040160405180910390fd5b336001600160a01b03167f6c8250ea4d625c09ee567802242f70b37c9dcfdb10a904563781c1ed7663c7cc837f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316639d1b464a6040518163ffffffff1660e01b8152600401602060405180830381865afa158015610ca4573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610cc89190610fa4565b6040805192835260208301919091520160405180910390a25050565b80600003610d055760405163269cf19b60e11b815260040160405180910390fd5b3360009081526001602052604090205480821115610d365760405163269cf19b60e11b815260040160405180910390fd5b610d408282611014565b336000818152600160205260408082209390935591516323b872dd60e01b81526004810191909152306024820152604481018490526001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016906323b872dd906064016020604051808303816000875af1158015610dc8573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610dec9190610fdf565b905080610e0c5760405163c1cf149f60e01b815260040160405180910390fd5b336001600160a01b03167fc1afad9537411d7ba4a74e9ee309d18f26f72ee1bfc63647b61e9bca0eec322c847f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316639d1b464a6040518163ffffffff1660e01b8152600401602060405180830381865afa1580156109b1573d6000803e3d6000fd5b610a05670de0b6b3a76400006078610f87565b6001600160a01b038116600090815260016020526040812054808203610ed3575060001992915050565b6000610ede846102e8565b905081610ef4670de0b6b3a76400006064610f87565b6103ab9083610f87565b610f07816102c3565b15610f2557604051632606396760e21b815260040160405180910390fd5b50565b600060208284031215610f3a57600080fd5b81356001600160a01b0381168114610f5157600080fd5b9392505050565b600060208284031215610f6a57600080fd5b5035919050565b634e487b7160e01b600052601160045260246000fd5b8082028115828204841417610f9e57610f9e610f71565b92915050565b600060208284031215610fb657600080fd5b5051919050565b600082610fda57634e487b7160e01b600052601260045260246000fd5b500490565b600060208284031215610ff157600080fd5b81518015158114610f5157600080fd5b80820180821115610f9e57610f9e610f71565b81810381811115610f9e57610f9e610f7156fea2646970667358221220038fa6518a3e95aad0f013d741f8bb7701796bf94e23833b53032457c421ad7964736f6c63430008140033",
  "deployedBytecode": "0x6080604052600436106100c65760003560e01c80638ba62f231161007f578063d5de45a611610059578063d5de45a61461023a578063d678598a1461025a578063d9e69a051461027a578063eee1ea331461028f57600080fd5b80638ba62f23146101b95780639e81699914610205578063bd00c24d1461020d57600080fd5b8063042e02cf146100d25780630835e145146101075780632a5f2c23146101355780632f865568146101625780636112fe2e146101845780637f3020c1146101a457600080fd5b366100cd57005b600080fd5b3480156100de57600080fd5b506100f26100ed366004610f28565b6102c3565b60405190151581526020015b60405180910390f35b34801561011357600080fd5b50610127610122366004610f28565b6102e8565b6040519081526020016100fe565b34801561014157600080fd5b50610127610150366004610f28565b60016020526000908152604090205481565b34801561016e57600080fd5b5061018261017d366004610f28565b6103bd565b005b34801561019057600080fd5b5061018261019f366004610f58565b610841565b3480156101b057600080fd5b506101276109f2565b3480156101c557600080fd5b506101ed7f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b0390911681526020016100fe565b610182610a08565b34801561021957600080fd5b50610127610228366004610f28565b60006020819052908152604090205481565b34801561024657600080fd5b50610182610255366004610f58565b610b17565b34801561026657600080fd5b50610182610275366004610f58565b610ce4565b34801561028657600080fd5b50610127610e96565b34801561029b57600080fd5b506101ed7f000000000000000000000000000000000000000000000000000000000000000081565b60006102d8670de0b6b3a76400006078610f87565b6102e183610ea9565b1092915050565b600080600080846001600160a01b03166001600160a01b0316815260200190815260200160002054905060007f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316639d1b464a6040518163ffffffff1660e01b8152600401602060405180830381865afa158015610372573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103969190610fa4565b9050670de0b6b3a76400006103ab8284610f87565b6103b59190610fbd565b949350505050565b6103c6816102c3565b6103e35760405163175ae04960e11b815260040160405180910390fd5b6001600160a01b0381166000908152600160205260408120549081900361041d5760405163175ae04960e11b815260040160405180910390fd5b6040516370a0823160e01b815233600482015281907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906370a0823190602401602060405180830381865afa158015610483573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104a79190610fa4565b10806105405750604051636eb1769f60e11b815233600482015230602482015281907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063dd62ed3e90604401602060405180830381865afa15801561051a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061053e9190610fa4565b105b1561055e576040516327f93fb360e11b815260040160405180910390fd5b6040516323b872dd60e01b8152336004820152306024820152604481018290526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906323b872dd906064016020604051808303816000875af11580156105d4573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105f89190610fdf565b9050806106185760405163a419137f60e01b815260040160405180910390fd5b600060016000856001600160a01b03166001600160a01b031681526020019081526020016000208190555060007f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316639d1b464a6040518163ffffffff1660e01b8152600401602060405180830381865afa1580156106a3573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106c79190610fa4565b90506000816106de670de0b6b3a764000086610f87565b6106e89190610fbd565b905060006106ff670de0b6b3a76400006064610f87565b610712670de0b6b3a7640000600a610f87565b61071c9084610f87565b6107269190610fbd565b905060006107348284611001565b6001600160a01b0388166000908152602081905260409020549091508082111561075c578091505b6107668282611014565b6001600160a01b038916600090815260208190526040808220929092559051339084908381818185875af1925050503d80600081146107c1576040519150601f19603f3d011682016040523d82523d6000602084013e6107c6565b606091505b50509050806107e85760405163a419137f60e01b815260040160405180910390fd5b604080518981526020810185905290810187905233906001600160a01b038b16907f5a821a618ddb1a1fd304234a69c9d7f20c129d122fcf35593d13a071926643079060600160405180910390a3505050505050505050565b806000036108625760405163269cf19b60e11b815260040160405180910390fd5b33600090815260208190526040902054808211156108935760405163269cf19b60e11b815260040160405180910390fd5b3360009081526020818152604080832085850390556001909152902054156108be576108be33610efe565b604051600090339084908381818185875af1925050503d8060008114610900576040519150601f19603f3d011682016040523d82523d6000602084013e610905565b606091505b50509050806109275760405163a419137f60e01b815260040160405180910390fd5b336001600160a01b03167fdaed309a628faec6cab72194019e2a1a34e890ca9bf9be99788992dd54692819847f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316639d1b464a6040518163ffffffff1660e01b8152600401602060405180830381865afa1580156109b1573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109d59190610fa4565b6040805192835260208301919091520160405180910390a2505050565b610a05670de0b6b3a7640000600a610f87565b81565b34600003610a295760405163269cf19b60e11b815260040160405180910390fd5b3360009081526020819052604081208054349290610a48908490611001565b92505081905550336001600160a01b03167f11f8990ac38271f23dea447d5728e9914fca7cea2edda43af6c43c415f8bc30b347f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316639d1b464a6040518163ffffffff1660e01b8152600401602060405180830381865afa158015610ad9573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610afd9190610fa4565b6040805192835260208301919091520160405180910390a2565b80600003610b385760405163269cf19b60e11b815260040160405180910390fd5b3360009081526001602052604081208054839290610b57908490611001565b90915550610b66905033610efe565b60405163a9059cbb60e01b8152336004820152602481018290526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063a9059cbb906044016020604051808303816000875af1158015610bd6573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610bfa9190610fdf565b905080610c1a5760405163a419137f60e01b815260040160405180910390fd5b336001600160a01b03167f6c8250ea4d625c09ee567802242f70b37c9dcfdb10a904563781c1ed7663c7cc837f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316639d1b464a6040518163ffffffff1660e01b8152600401602060405180830381865afa158015610ca4573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610cc89190610fa4565b6040805192835260208301919091520160405180910390a25050565b80600003610d055760405163269cf19b60e11b815260040160405180910390fd5b3360009081526001602052604090205480821115610d365760405163269cf19b60e11b815260040160405180910390fd5b610d408282611014565b336000818152600160205260408082209390935591516323b872dd60e01b81526004810191909152306024820152604481018490526001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016906323b872dd906064016020604051808303816000875af1158015610dc8573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610dec9190610fdf565b905080610e0c5760405163c1cf149f60e01b815260040160405180910390fd5b336001600160a01b03167fc1afad9537411d7ba4a74e9ee309d18f26f72ee1bfc63647b61e9bca0eec322c847f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316639d1b464a6040518163ffffffff1660e01b8152600401602060405180830381865afa1580156109b1573d6000803e3d6000fd5b610a05670de0b6b3a76400006078610f87565b6001600160a01b038116600090815260016020526040812054808203610ed3575060001992915050565b6000610ede846102e8565b905081610ef4670de0b6b3a76400006064610f87565b6103ab9083610f87565b610f07816102c3565b15610f2557604051632606396760e21b815260040160405180910390fd5b50565b600060208284031215610f3a57600080fd5b81356001600160a01b0381168114610f5157600080fd5b9392505050565b600060208284031215610f6a57600080fd5b5035919050565b634e487b7160e01b600052601160045260246000fd5b8082028115828204841417610f9e57610f9e610f71565b92915050565b600060208284031215610fb657600080fd5b5051919050565b600082610fda57634e487b7160e01b600052601260045260246000fd5b500490565b600060208284031215610ff157600080fd5b81518015158114610f5157600080fd5b80820180821115610f9e57610f9e610f71565b81810381811115610f9e57610f9e610f7156fea2646970667358221220038fa6518a3e95aad0f013d741f8bb7701796bf94e23833b53032457c421ad7964736f6c63430008140033",
  "devdoc": {
    "kind": "dev",
    "methods": {},
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {
      "COLLATERAL_RATIO()": {
        "notice": "minimal rasio kolateral 120% (dalam persen * 1e18)."
      },
      "LIQUIDATOR_REWARD()": {
        "notice": "insentif likuidator 10% (dalam persen * 1e18)."
      },
      "calculateCollateralValue(address)": {
        "notice": "nilai kolateral (ETH) user dalam CORN (1e18)"
      }
    },
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 75,
        "contract": "contracts/Lending.sol:Lending",
        "label": "s_userCollateral",
        "offset": 0,
        "slot": "0",
        "type": "t_mapping(t_address,t_uint256)"
      },
      {
        "astId": 79,
        "contract": "contracts/Lending.sol:Lending",
        "label": "s_userBorrowed",
        "offset": 0,
        "slot": "1",
        "type": "t_mapping(t_address,t_uint256)"
      }
    ],
    "types": {
      "t_address": {
        "encoding": "inplace",
        "label": "address",
        "numberOfBytes": "20"
      },
      "t_mapping(t_address,t_uint256)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => uint256)",
        "numberOfBytes": "32",
        "value": "t_uint256"
      },
      "t_uint256": {
        "encoding": "inplace",
        "label": "uint256",
        "numberOfBytes": "32"
      }
    }
  }
}